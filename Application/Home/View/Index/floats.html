<script src='{work=$Think.const.WORK_LOG}/js/floats/jquery.gridly.js'></script>
<script src='{work=$Think.const.WORK_LOG}/js/floats/ke.js'></script>
<section id="float-wrap">
	<div class='gridly'>
		<div>
			<span class="extend-box">
				+
			</span>
			<span class="statistical iconfont">
				
			</span>
			<span class="details iconfont">
				
			</span>
			<span class="bug iconfont">
				
			</span>
			<span class="function iconfont">
				
			</span>
		</div>
	</div>
</section>
<section id="details-wrap">
	<input type="hidden" id="project-details-pid">
	<textarea id="o-content" autoHeight="true"></textarea>
</section>
<script>
	$.fn.autoHeight = function(){
		
		function autoHeight(elem){
			elem.style.height = 'auto';
			elem.scrollTop = 0; //防抖动
			elem.style.height = elem.scrollHeight + 'px';
		}
		
		this.each(function(){
			autoHeight(this);
			$(this).on('keyup', function(){
				autoHeight(this);
			});
		});
	 
	}
	var ocontent=$("#o-content");
	ocontent.keydown(function(evt){
		var pid=$("#project-details-pid").val();
		evt = (evt) ? evt : window.event;
		if (evt.keyCode) {
		  if(evt.keyCode == 13){//回车
		  	$.ajax({
		  		url:controller+"/editProjectDescribe",
		  		data:{pid:pid,content:ocontent.val()},
		  		dataType:'json',
		  		success:function(data){
		  			console.log(data);
		  			if(data.status==1){
		  				console.log("1");
		  			}else{
		  				console.log("wrong")
		  			}
		  		}
		  	})
		  }
		}
	})
	// ocontent.on("click",function(){
	// 	$('textarea[autoHeight]').autoHeight();
	// })
</script>
<script>
	// $('textarea[autoHeight]').autoHeight();
</script>